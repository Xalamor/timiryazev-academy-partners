# Документация проекта timiryazev-academy-partners

Проект — это Next.js-приложение, которое показывает международных партнёров Тимирязевской академии на интерактивной карте и в виде списков/страниц по странам.

## Структура проекта

### Корневые файлы

| Файл | Назначение |
|------|------------|
| **.gitignore** | Служебный файл Git: перечисляет файлы/папки, которые не должны попадать в репозиторий (node_modules, сборка и т.п.). |
| **package.json** | Описание npm-пакета: название проекта, версия, скрипты и зависимости (next, react, react-dom, leaflet, react-leaflet, axios, tailwindcss, TypeScript и т.д.). |
| **package-lock.json** | Зафиксированные версии всех зависимостей. |
| **tsconfig.json** | Настройки TypeScript: включает строгий режим и алиасы путей (`@/*` → корень проекта, `@/public` → папка public, `@/components` → папка components). |
| **next.config.ts** | Конфигурация Next.js (сейчас пустой объект, можно расширять по мере необходимости). |
| **eslint.config.mjs** | Конфигурация ESLint на основе eslint-config-next. Игнорируются служебные папки .next, out, build и файл next-env.d.ts. |
| **postcss.config.mjs** | Конфигурация PostCSS: использует плагин @tailwindcss/postcss (Tailwind CSS 4). |
| **README.md** | Стандартная документация от create-next-app (можно заменить на текущий документ). |

---

### Папка `app/` — маршруты Next.js (App Router)

Папка `app` содержит корневой layout, глобальные стили и страницы (маршруты) приложения.

#### `app/layout.tsx`
Главный layout приложения:
- Подключает шрифты Geist и Geist_Mono из `next/font/google`.
- Устанавливает метаданные: `title: "Тимирязевская академия"`, `description: "Международное сотрудничество Тимирязевской академии"`.
- Подключает глобальные стили `./globals.css`.
- Оборачивает содержимое во Flex‑контейнер с хедером (`<Header />`) и футером (`<Footer />`).

#### `app/page.tsx`
Корневая страница `/`:
- Импортирует и рендерит компонент `<WorldMap />`.
- Главная страница — это интерактивная карта партнёров.

#### `app/globals.css`
Глобальные CSS‑стили:
- Подключение Tailwind (`@tailwind base; @tailwind components; @tailwind utilities;`).
- Сброс отступов, ограничение по ширине, базовые стили для `html`, `body` и ссылок.

#### `app/partners.ts`
Файл с данными партнёров и вспомогательными функциями (подробно — в разделе **[Редактирование партнёров](#редактирование-партнёров)** ниже).

#### `app/partners/page.tsx`
Страница `/partners`:
- Показывает список всех стран-партнёров (с количеством университетов) и сетку всех партнёров.
- Включает блок общей статистики.
- Каждая страна и партнёр — карточка со ссылкой на `/partners/[country]` или на конкретного партнёра с якорем (`/partners/{country}#{partner.id}`).
- Использует стили из `./partners.css`.

#### `app/partners/partners.css`
CSS‑стили для страниц раздела «Партнёры» (`/partners` и `/partners/[country]`). Адаптивная вёрстка.

#### `app/partners/[country]/page.tsx`
Динамическая страница `/partners/[country]`:
- Помечена `"use client"` (использует `useParams` и `useEffect`).
- Декодирует параметр `country` из URL, загружает список партнёров этой страны.
- При наличии `#id` в URL прокручивает к элементу с таким `id`.
- Отображает заголовок, статистику по стране и подробные карточки партнёров (описание, программы, статистика, ссылка на сайт).

#### `app/university/page.tsx`
Страница `/university`:
- Описывает Тимирязевскую академию: история, достижения, международное сотрудничество, список факультетов, ключевые цифры, контактная информация.
- Ссылка «Смотреть всех партнеров» ведёт на `/partners`.
- Использует стили `./university.css`.

#### `app/university/university.css`
CSS‑стили для страницы `/university`. Адаптивное отображение.

#### `app/favicon.ico`
Иконка сайта.

---

### Папка `components/` — общие компоненты

#### `components/Header.tsx`
Компонент хедера (верхняя навигация):
- `"use client"`: использует состояние для мобильного меню.
- Содержит логотип (`/logo.svg`), меню («Партнеры», «Университет»), мобильную кнопку-гамбургер.
- Вёрстка через inline‑стили + `<style jsx>` для адаптивности.

#### `components/Footer.tsx`
Компонент футера:
- Подключает стили `./Footer.css`.
- Содержит логотип, навигационное меню, контактную информацию (адрес, телефон), копирайт с текущим годом.

#### `components/WorldMap.tsx`
Компонент интерактивной карты мира с партнёрами:
- `"use client"`, использует React‑хуки и динамические импорты.
- Использует `react-leaflet` (`MapContainer`, `TileLayer`, `GeoJSON`, `Popup`).
- Загружает GeoJSON‑данные стран мира.
- Подсвечивает страны-партнёры зелёным цветом.
- При клике на страну показывает popup с информацией и списком партнёров, а также кнопку «Подробнее о сотрудничестве».
- Внизу под картой — блок статистики.

#### `components/Footer.css`
Стили для футера: зелёный фон, белый текст, адаптивное расположение элементов.

#### `components/WorldMap.css`
Стили для карты: размеры контейнера, оформление легенды, статистического блока, popup‑окна, отключение атрибуции Leaflet/OSM.

---

### Папка `public/`

| Файл | Назначение |
|------|------------|
| `public/logo.svg` | SVG‑логотип, используемый в `Header` и `Footer`. |

---

## Редактирование партнёров

Данные о партнёрах хранятся в файле **`app/partners.ts`**.

### Структура файла

1.  **Интерфейс `Partner`**:
    ```typescript
    export interface Partner {
      id: string;
      name: string;
      country: string;
      city: string;
      description: string;
      year: number; // Год начала сотрудничества
      programs: string[];
      website?: string;
      studentsCount: number; // Количество студентов по обмену
    }
    ```

2.  **Список партнёров `PARTNERS`**:
    Массив объектов `Partner`. Каждый объект описывает один университет‑партнёр.

3.  **Список стран `PARTNER_COUNTRIES`**:
    Массив строк с названиями стран, в которых есть партнёры.

4.  **Карта стран к университетам `PARTNER_DATA`**:
    Объект вида `Record<string, string[]>`:
    - **Ключ** — название страны (должно совпадать с `PARTNER_COUNTRIES` и `Partner.country`).
    - **Значение** — массив названий университетов из `PARTNERS`.

5.  **Вспомогательные функции**:
    - `getPartnersByCountry(country: string): Partner[]` — фильтрует `PARTNERS` по полю `country`.
    - `getCountryPartnersCount(country: string): number` — возвращает количество партнёров в стране.

---

### Как добавить нового партнёра

1.  Откройте `app/partners.ts`.
2.  В массив `PARTNERS` добавьте новый объект формата:
    ```typescript
    {
      id: "unique-id", // Уникальный идентификатор
      name: "Название университета",
      country: "Страна", // Например, "Germany"
      city: "Город",
      description: "Описание...",
      year: 2020,
      programs: ["Программа 1", "Программа 2"],
      website: "https://example.com", // Необязательно
      studentsCount: 50
    }
    ```
3.  Убедитесь, что:
    - `id` уникален среди всех партнёров (используется как `id` DOM‑элемента и в ссылках вида `#id`).
    - `country` написана точно так же, как в других местах (регистр и пробелы важны). Например: `"Germany"`, `"United States of America"`.
4.  Если страна **уже есть** в `PARTNER_COUNTRIES`, переходите к шагу 5.  
    Если страна **новая**, сначала добавьте её (см. раздел **«Как добавить новую страну»** ниже).
5.  В объекте `PARTNER_DATA` найдите ключ, соответствующий стране, и добавьте название нового университета в массив значений. Название должно совпадать с полем `name` из `PARTNERS`.
    ```typescript
    "Germany": [
      "Технический университет Мюнхена",
      "Название нового университета", // <- Добавьте здесь
      // ... другие университеты Германии
    ]
    ```
6.  Сохраните файл. После перезапуска dev‑сервера (`npm run dev`) новый партнёр появится:
    - На странице `/partners` (в списке «Все партнёры» и в счётчиках).
    - На странице `/partners/[country]`.
    - В popup на карте (через `PARTNER_DATA`).

---

### Как изменить существующего партнёра

1.  В массиве `PARTNERS` найдите объект с нужным `id` или `name`.
2.  Измените нужные поля: `name`, `city`, `description`, `year`, `programs`, `website`, `studentsCount`.
3.  Если вы изменили:
    - **Название университета (`name`)** — обновите соответствующую строку в массиве `PARTNER_DATA[country]`.
    - **Страну (`country`)** — проверьте, что новая страна уже есть в `PARTNER_COUNTRIES` и `PARTNER_DATA`, и перенесите название университета в правильный список. При необходимости добавьте новую страну.

---

### Как удалить партнёра

1.  В массиве `PARTNERS` удалите объект соответствующего партнёра.
2.  В `PARTNER_DATA` найдите массив по стране этого партнёра и удалите название университета из массива.
3.  Если после удаления у страны **больше нет партнёров**:
    - Вы можете удалить эту страну из `PARTNER_COUNTRIES` и ключ из `PARTNER_DATA`.
    - Страна перестанет подсвечиваться на карте и исчезнет из списков.

---

### Как добавить новую страну

1.  В `PARTNERS` добавьте партнёра с `country: "Новая страна"` (например, `"Italy"`).
2.  В массив `PARTNER_COUNTRIES` добавьте новую страну:
    ```typescript
    export const PARTNER_COUNTRIES = [
      // ... существующие страны
      "Italy",
    ];
    ```
3.  В объект `PARTNER_DATA` добавьте ключ:
    ```typescript
    export const PARTNER_DATA: Record<string, string[]> = {
      // ... существующие страны
      "Italy": ["Название университета в Италии"],
    };
    ```
4.  **Важно**: название страны (`"Italy"`) должно совпадать:
    - В `PARTNER_COUNTRIES`.
    - В `PARTNERS[i].country`.
    - С названием страны в GeoJSON (`feature.properties.name`) — от этого зависит подсветка на карте.
